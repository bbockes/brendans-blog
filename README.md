# Brendan's Blog

This code was generated by [Magic Patterns](https://magicpatterns.com) and built using [Bolt](https://bolt.new)

## Getting Started

1. Run `npm install`
2. Run `npm run dev`

## RSS

- **Feed URL**: `/feed.xml` (production: `https://blog.brendanbockes.com/feed.xml`)
- **How it’s generated**: `npm run build` runs `node scripts/generate-rss.js`, which fetches the latest posts from Sanity and writes `feed.xml` to both `public/` (local dev) and `dist/` (deploy output).

### Auto-update on publish (recommended)

Because RSS is generated at build time, the feed updates when Netlify rebuilds. To trigger rebuilds immediately after you publish in Sanity:

1. **Netlify**: create a Build Hook and copy its URL.
2. **Netlify**: set env vars:
   - `NETLIFY_BUILD_HOOK_URL` = the build hook URL
   - `SANITY_WEBHOOK_SECRET` = any long random string
3. **Sanity**: create a webhook:
   - **URL**: `https://blog.brendanbockes.com/.netlify/functions/sanity-rebuild`
   - **Method**: POST
   - **Header**: `x-webhook-secret: <SANITY_WEBHOOK_SECRET>`
   - **Triggers**: at least “update” (publish), ideally create/update/delete for `post` docs

Sanity will hit the function, the function triggers a Netlify build, and the build regenerates `/feed.xml`.
